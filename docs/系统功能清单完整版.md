# 体育知识智能题库平台 - 系统功能清单完整版

## 📋 文档概述

本文档提供系统的完整功能清单，包括前端页面功能、后端API接口和数据库表结构。

**文档版本**: v1.0  
**更新时间**: 2024年12月  
**系统完成度**: 95%

---

### 📊 清单统计概览

#### 🖥️ 前端页面功能 (23个页面)
- **认证相关**: 登录、注册
- **学习功能**: 练习、考试、进度、收藏、知识库、学习资源
- **教师功能**: 考试发布、考试监控、班级管理、学生进度、题库管理
- **管理员功能**: 系统管理、机构管理、权限管理、反馈管理、操作日志
- **社区功能**: 讨论社区、成就中心、个人资料

#### 🔌 后端API接口 (80+个接口)
分为16个主要模块：
- 认证管理 (`/api/auth`)
- 用户管理 (`/api/users`) 
- 题目管理 (`/api/questions`)
- 考试管理 (`/api/exams`)
- 班级管理 (`/api/classes`)
- 机构管理 (`/api/institutions`)
- 知识库管理 (`/api/knowledge-bases`)
- 学习进度 (`/api/progress`)
- 成就系统 (`/api/achievements`)
- 推荐系统 (`/api/recommendations`)
- 收藏管理 (`/api/favorites`)
- 讨论社区 (`/api/discussions`)
- 学习资源 (`/api/resources`)
- 通知系统 (`/api/notifications`)
- 文件管理 (`/api/files`)
- 数据统计 (`/api/stats`)

#### 🗄️ 数据库表结构 (15个核心表)
详细包含：
- **用户相关**: User、Institution
- **学习内容**: Question、Exam、ExamPublication
- **知识库**: KnowledgeBase、KnowledgePoint
- **班级管理**: Class、LearningProgress
- **成就系统**: Achievement、UserAchievement
- **社区系统**: Discussion、LearningResource
- **系统管理**: Notification、Permission、Role、Favorite

### 🎯 核心特色

#### 功能完整度
- **整体完成度**: 95%
- **支持4种用户角色**: 学生、教师、管理员、超级管理员
- **覆盖完整教学流程**: 从内容创建到学习评估

#### 技术架构
- **前后端分离**: React + Node.js + MongoDB
- **AI智能集成**: 题目生成、个性化推荐
- **权限管理**: 细粒度角色权限控制
- **多媒体支持**: 图片、视频、音频、文档

#### 业务价值
- **教育场景完备**: 练习、考试、进度跟踪、成就激励
- **管理功能齐全**: 班级管理、机构管理、数据统计
- **社区互动**: 讨论交流、知识分享
- **智能化服务**: AI推荐、自适应学习

----------------------------------------------------------

## 🖥️ 前端页面功能清单

### 1. 认证相关页面

#### 1.1 登录页面 (`Login.tsx`)
**路由**: `/login`
**功能按钮**:
- 🔐 用户登录按钮
- 👥 角色切换选项卡 (学生/教师/管理员)
- 🔗 注册链接

**主要功能**:
- 多角色登录支持
- 表单验证
- 自动跳转

#### 1.2 注册页面 (`Register.tsx`)
**路由**: `/register`
**功能按钮**:
- ✅ 用户注册按钮
- 🏫 学校选择下拉框
- 📝 验证码输入
- 🔗 登录链接

**主要功能**:
- 学生注册
- 学校信息获取
- 表单验证

### 2. 仪表板页面

#### 2.1 主仪表板 (`Dashboard.tsx`)
**路由**: `/dashboard`
**功能按钮**:
- 🚀 开始练习按钮
- 📝 模拟考试按钮
- 📚 知识库按钮
- 🏆 成就中心按钮
- 👥 社区讨论按钮
- 📊 学习分析按钮

**教师专用按钮**:
- 🎯 考试发布按钮
- 📖 题库管理按钮
- 👨‍🏫 班级管理按钮
- 📈 学生分析按钮

**管理员专用按钮**:
- 🏛️ 系统管理按钮
- 📊 数据统计按钮
- 👥 用户管理按钮
- 🔧 系统设置按钮

**主要功能**:
- 个性化仪表板
- 学习统计展示
- 快速导航
- 角色差异化界面

### 3. 学习功能页面

#### 3.1 智能练习页面 (`Practice.tsx`)
**路由**: `/practice`
**功能按钮**:
- 🎲 随机练习按钮
- 🎯 专项练习按钮
- ❌ 错题重练按钮
- ⭐ 收藏练习按钮
- ✅ 提交答案按钮
- ⏭️ 下一题按钮
- ⏸️ 暂停练习按钮
- 📊 查看解析按钮

**主要功能**:
- 4种练习模式
- 实时答题反馈
- 智能推荐题目
- 进度追踪

#### 3.2 模拟考试页面 (`Exam.tsx`)
**路由**: `/exam`
**功能按钮**:
- 🎯 开始考试按钮
- 💾 保存答案按钮
- 📤 提交试卷按钮
- ⏱️ 计时器显示
- 📋 题目导航
- 🏁 结束考试按钮

**主要功能**:
- 考试环境模拟
- 自动计时
- 成绩分析
- 答题回顾

#### 3.3 我的进度页面 (`MyProgress.tsx`)
**路由**: `/my-progress`
**功能按钮**:
- 📊 图表切换按钮
- 📅 时间范围选择
- 📋 详细报告按钮
- 📄 导出报告按钮

**主要功能**:
- 学习进度展示
- 能力雷达图
- 学习趋势分析
- 薄弱环节识别

#### 3.4 收藏管理页面 (`Favorites.tsx`)
**路由**: `/favorites`
**功能按钮**:
- ⭐ 添加收藏按钮
- 🗑️ 删除收藏按钮
- 📝 开始练习按钮
- 🏷️ 分类管理按钮
- 🔍 搜索筛选按钮

**主要功能**:
- 题目收藏管理
- 分类整理
- 批量操作

### 4. 知识库功能页面

#### 4.1 学生知识库页面 (`StudentKnowledgeBase.tsx`)
**路由**: `/student-knowledge-base`
**功能按钮**:
- 📖 浏览知识库按钮
- 🛤️ 学习路径按钮
- 🎯 推荐内容按钮
- 📊 学习统计按钮

**主要功能**:
- 知识点浏览
- 个性化学习路径
- 智能推荐
- 学习进度跟踪

#### 4.2 教师知识库页面 (`KnowledgeBase.tsx`)
**路由**: `/knowledge-base`
**功能按钮**:
- ➕ 创建知识库按钮
- ✏️ 编辑内容按钮
- 🗑️ 删除内容按钮
- 👁️ 预览内容按钮
- 📤 发布内容按钮
- 📁 文件上传按钮
- 🔗 关联管理按钮

**主要功能**:
- 知识库创建管理
- 内容编辑发布
- 多媒体支持
- 知识点关联

#### 4.3 学习资源页面 (`LearningResources.tsx`)
**路由**: `/learning-resources`
**功能按钮**:
- 📥 资源下载按钮
- 👁️ 在线预览按钮
- ⭐ 收藏资源按钮
- 💬 评论互动按钮
- 📤 资源上传按钮 (教师)

**主要功能**:
- 资源浏览下载
- 在线预览
- 资源管理
- 互动评论

### 5. 考试管理页面 (教师专用)

#### 5.1 考试发布页面 (`TeacherExamPublish.tsx`)
**路由**: `/teacher-exam-publish`
**功能按钮**:
- 📝 创建考试按钮
- 🎲 自动组卷按钮
- 👥 选择学生按钮
- ⏰ 设置时间按钮
- 📤 发布考试按钮
- 👁️ 预览试卷按钮

**主要功能**:
- 五步式考试创建
- 智能组卷
- 学生群体选择
- 考试参数配置

#### 5.2 考试监控页面 (`ExamMonitor.tsx`)
**路由**: `/exam-monitor`
**功能按钮**:
- 📊 实时监控按钮
- 📢 发送通知按钮
- ⏰ 延长时间按钮
- 🔚 结束考试按钮
- 📋 导出成绩按钮

**主要功能**:
- 实时考试监控
- 学生状态跟踪
- 通知管理
- 成绩统计

### 6. 班级管理页面 (教师专用)

#### 6.1 班级管理页面 (`ClassManagement.tsx`)
**路由**: `/class-management`
**功能按钮**:
- ➕ 创建班级按钮
- 👥 添加学生按钮
- ✏️ 编辑班级按钮
- 🗑️ 删除班级按钮
- 📊 班级统计按钮
- 📤 批量导入按钮

**主要功能**:
- 班级创建管理
- 学生管理
- 班级统计分析
- 批量操作

#### 6.2 学生进度页面 (`StudentProgress.tsx`)
**路由**: `/student-progress`
**功能按钮**:
- 👁️ 查看详情按钮
- 📊 生成报告按钮
- 📤 导出数据按钮
- 🔍 搜索筛选按钮

**主要功能**:
- 学生进度监控
- 学习分析报告
- 数据导出
- 个性化建议

### 7. 题库管理页面 (教师专用)

#### 7.1 题库管理页面 (`QuestionBank.tsx`)
**路由**: `/question-bank`
**功能按钮**:
- ➕ 创建题目按钮
- 🤖 AI生成按钮
- ✏️ 编辑题目按钮
- 🗑️ 删除题目按钮
- 📤 批量导入按钮
- 📥 批量导出按钮
- 🔍 搜索筛选按钮
- 👁️ 预览题目按钮
- ✅ 审核通过按钮
- ❌ 审核拒绝按钮

**主要功能**:
- 题目CRUD操作
- AI智能生成
- 批量操作
- 题目审核
- 分类管理

### 8. 社区功能页面

#### 8.1 社区讨论页面 (`Community.tsx`)
**路由**: `/community`
**功能按钮**:
- ➕ 发布话题按钮
- 💬 回复评论按钮
- 👍 点赞按钮
- ⭐ 收藏按钮
- 📤 分享按钮
- 🏷️ 添加标签按钮

**主要功能**:
- 话题发布讨论
- 评论互动
- 内容分享
- 社区管理

### 9. 成就系统页面

#### 9.1 成就中心页面 (`Achievements.tsx`)
**路由**: `/achievements`
**功能按钮**:
- 👁️ 查看详情按钮
- 📊 成就统计按钮
- 🏆 排行榜按钮

**主要功能**:
- 成就展示
- 进度追踪
- 排行榜
- 激励系统

### 10. 个人资料页面

#### 10.1 个人资料页面 (`Profile.tsx`) 
**路由**: `/profile`
**功能按钮**:
- ✏️ 编辑资料按钮
- 📷 上传头像按钮
- 💾 保存修改按钮
- 🔒 修改密码按钮
- ⚙️ 设置偏好按钮

**主要功能**:
- 个人信息管理 
- 学习统计展示
- 偏好设置
- 账户安全

### 11. 管理员功能页面

#### 11.1 系统管理页面 (`AdminPanel.tsx`)
**路由**: `/admin-panel`
**功能按钮**:
- 📊 系统概览按钮
- 👥 用户管理按钮
- 📈 数据统计按钮
- ⚙️ 系统设置按钮

**主要功能**:
- 系统监控
- 数据统计
- 用户管理
- 系统配置

#### 11.2 机构管理页面 (`InstitutionManagement.tsx`)
**路由**: `/institution-management`
**功能按钮**:
- ➕ 创建机构按钮
- ✏️ 编辑机构按钮
- 🗑️ 删除机构按钮
- 👥 用户管理按钮
- 📊 机构统计按钮

**主要功能**:
- 机构创建管理
- 机构用户管理
- 数据统计分析

#### 11.3 权限管理页面 (`PermissionManagement.tsx`)
**路由**: `/permission-management`
**功能按钮**:
- ➕ 创建角色按钮
- ✏️ 编辑权限按钮
- 👥 分配角色按钮
- 🔍 权限审计按钮

**主要功能**:
- 角色权限管理
- 权限分配
- 权限审计

#### 11.4 反馈管理页面 (`FeedbackManagement.tsx`)
**路由**: `/feedback-management`
**功能按钮**:
- 👁️ 查看反馈按钮
- ✅ 处理完成按钮
- 💬 回复反馈按钮
- 🏷️ 分类管理按钮

**主要功能**:
- 用户反馈处理
- 问题分类管理
- 反馈统计分析

#### 11.5 操作日志页面 (`OperationLogs.tsx`)
**路由**: `/operation-logs`
**功能按钮**:
- 🔍 搜索日志按钮
- 📅 时间筛选按钮
- 📥 导出日志按钮

**主要功能**:
- 操作日志查看
- 日志搜索筛选
- 系统审计

---

## 🔌 后端API接口清单

### 1. 认证相关接口 (`/api/auth`)

#### 1.1 用户认证
- `POST /api/auth/register` - 用户注册
- `POST /api/auth/login` - 用户登录
- `POST /api/auth/logout` - 用户登出
- `POST /api/auth/refresh` - 刷新token
- `GET /api/auth/profile` - 获取用户信息

### 2. 用户管理接口 (`/api/users`)

#### 2.1 用户CRUD
- `GET /api/users` - 获取用户列表
- `GET /api/users/:id` - 获取用户详情
- `PUT /api/users/:id` - 更新用户信息
- `DELETE /api/users/:id` - 删除用户
- `POST /api/users/batch` - 批量操作用户

#### 2.2 密码管理
- `POST /api/users/:id/reset-password` - 重置密码
- `PUT /api/users/:id/change-password` - 修改密码

### 3. 题目管理接口 (`/api/questions`)

#### 3.1 题目CRUD
- `GET /api/questions` - 获取题目列表
- `GET /api/questions/:id` - 获取题目详情
- `POST /api/questions` - 创建题目
- `PUT /api/questions/:id` - 更新题目
- `DELETE /api/questions/:id` - 删除题目

#### 3.2 AI生成功能
- `POST /api/questions/generate` - AI生成单个题目
- `POST /api/questions/generate-multiple` - AI批量生成题目
- `POST /api/questions/optimize` - 优化题目内容

#### 3.3 题目管理
- `POST /api/questions/import` - 批量导入题目
- `GET /api/questions/export` - 批量导出题目
- `PUT /api/questions/:id/review` - 题目审核
- `GET /api/questions/pending` - 获取待审核题目

### 4. 考试管理接口 (`/api/exams`)

#### 4.1 考试CRUD
- `GET /api/exams` - 获取考试列表
- `GET /api/exams/:id` - 获取考试详情
- `POST /api/exams` - 创建考试
- `PUT /api/exams/:id` - 更新考试
- `DELETE /api/exams/:id` - 删除考试

#### 4.2 考试参与
- `POST /api/exams/:id/start` - 开始考试
- `POST /api/exams/:id/submit` - 提交考试
- `POST /api/exams/:id/save-answer` - 保存答案
- `GET /api/exams/:id/result` - 获取考试结果

#### 4.3 考试发布
- `POST /api/exams/publish` - 发布考试
- `GET /api/exams/published/list` - 获取已发布考试
- `GET /api/exams/published/:id/stats` - 考试参与统计
- `POST /api/exams/:id/notify` - 发送考试通知

### 5. 班级管理接口 (`/api/classes`)

#### 5.1 班级CRUD
- `GET /api/classes` - 获取班级列表
- `GET /api/classes/:id` - 获取班级详情
- `POST /api/classes` - 创建班级
- `PUT /api/classes/:id` - 更新班级
- `DELETE /api/classes/:id` - 删除班级

#### 5.2 学生管理
- `GET /api/classes/:id/students` - 获取班级学生
- `POST /api/classes/:id/students` - 添加学生到班级
- `DELETE /api/classes/:id/students/:studentId` - 从班级移除学生
- `POST /api/classes/:id/students/batch` - 批量添加学生

#### 5.3 班级统计
- `GET /api/classes/:id/stats` - 获取班级统计
- `GET /api/classes/:id/progress` - 获取班级学习进度

### 6. 机构管理接口 (`/api/institutions`)

#### 6.1 机构CRUD
- `GET /api/institutions` - 获取机构列表
- `GET /api/institutions/:id` - 获取机构详情
- `POST /api/institutions` - 创建机构
- `PUT /api/institutions/:id` - 更新机构
- `DELETE /api/institutions/:id` - 删除机构

#### 6.2 机构管理
- `GET /api/institutions/:id/users` - 获取机构用户
- `POST /api/institutions/:id/users` - 添加机构用户
- `GET /api/institutions/:id/stats` - 获取机构统计
- `POST /api/institutions/batch` - 批量操作机构

### 7. 知识库接口 (`/api/knowledge-bases`)

#### 7.1 知识库CRUD
- `GET /api/knowledge-bases` - 获取知识库列表
- `GET /api/knowledge-bases/:id` - 获取知识库详情
- `POST /api/knowledge-bases` - 创建知识库
- `PUT /api/knowledge-bases/:id` - 更新知识库
- `DELETE /api/knowledge-bases/:id` - 删除知识库

#### 7.2 知识点管理
- `GET /api/knowledge-bases/:id/points` - 获取知识点
- `POST /api/knowledge-bases/:id/points` - 创建知识点
- `PUT /api/knowledge-bases/:id/points/:pointId` - 更新知识点
- `DELETE /api/knowledge-bases/:id/points/:pointId` - 删除知识点

### 8. 学习进度接口 (`/api/progress`)

#### 8.1 进度查询
- `GET /api/progress/students` - 获取学生进度列表
- `GET /api/progress/student/:id` - 获取单个学生详细进度
- `GET /api/progress/class/:id` - 获取班级整体进度
- `GET /api/progress/my-progress` - 个人学习进度

#### 8.2 进度管理
- `POST /api/progress/track` - 记录学习进度
- `GET /api/progress/analytics` - 获取进度分析报告
- `GET /api/progress/learning-history` - 学习记录历史
- `GET /api/progress/summary` - 学习统计摘要

### 9. 成就系统接口 (`/api/achievements`)

#### 9.1 成就查询
- `GET /api/achievements` - 获取用户成就列表
- `GET /api/achievements/stats` - 获取成就统计
- `GET /api/achievements/recent` - 获取最近获得的成就
- `GET /api/achievements/leaderboard` - 获取成就排行榜

#### 9.2 成就管理
- `POST /api/achievements/check` - 手动检查成就进度
- `PUT /api/achievements/notify/:id` - 标记成就通知已读
- `POST /api/achievements/initialize` - 初始化默认成就(管理员)

### 10. 推荐系统接口 (`/api/recommendations`)

#### 10.1 智能推荐
- `GET /api/recommendations/questions` - 获取推荐题目
- `GET /api/recommendations/learning-paths` - 获取推荐学习路径
- `GET /api/recommendations/knowledge-points/:id` - 获取推荐知识点

### 11. 收藏管理接口 (`/api/favorites`)

#### 11.1 收藏操作
- `GET /api/favorites` - 获取收藏列表
- `POST /api/favorites` - 添加收藏
- `DELETE /api/favorites/:id` - 删除收藏

### 12. 讨论社区接口 (`/api/discussions`)

#### 12.1 讨论管理
- `GET /api/discussions` - 获取讨论列表
- `GET /api/discussions/:id` - 获取讨论详情
- `POST /api/discussions` - 创建讨论
- `POST /api/discussions/:id/reply` - 回复讨论

### 13. 学习资源接口 (`/api/resources`)

#### 13.1 资源管理
- `GET /api/resources` - 获取资源列表
- `GET /api/resources/:id` - 获取资源详情
- `POST /api/resources` - 上传资源
- `DELETE /api/resources/:id` - 删除资源

### 14. 通知系统接口 (`/api/notifications`)

#### 14.1 通知管理
- `GET /api/notifications` - 获取通知列表
- `POST /api/notifications` - 创建通知
- `PUT /api/notifications/:id/read` - 标记通知已读
- `POST /api/notifications/:id/send` - 发送通知

### 15. 文件管理接口 (`/api/files`)

#### 15.1 文件操作
- `POST /api/files/upload` - 文件上传
- `GET /api/files/:id` - 文件下载
- `DELETE /api/files/:id` - 删除文件
- `GET /api/files/list` - 文件列表

### 16. 数据统计接口 (`/api/stats`)

#### 16.1 统计查询
- `GET /api/stats/dashboard` - 仪表板统计
- `GET /api/stats/learning` - 学习统计
- `GET /api/stats/system` - 系统统计
- `GET /api/stats/leaderboard` - 排行榜数据

---

## 🗄️ 数据库表结构清单

### 1. 用户相关表

#### 1.1 用户表 (`User`)
```typescript
interface IUser {
  username: string;              // 用户名
  email: string;                 // 邮箱
  password: string;              // 密码(加密)
  phone?: string;                // 手机号
  avatar?: string;               // 头像
  role: string;                  // 角色: student/teacher/admin/super_admin/content_manager/institution_admin
  institution?: ObjectId;        // 所属机构ID
  grade?: string;                // 年级
  classInfo?: string;            // 班级信息
  
  // 学习统计
  learningStats: {
    totalQuestions: number;      // 总答题数
    correctAnswers: number;      // 正确答题数
    accuracy: number;            // 正确率
    totalTime: number;           // 学习总时长(分钟)
    totalExams: number;          // 总考试次数
    passedExams: number;         // 通过考试次数
    continuousLoginDays: number; // 连续登录天数
    lastLoginDate: Date;         // 最后登录日期
  };
  
  // 个人设置
  settings: {
    notifications: boolean;      // 通知开关
    difficulty: string;          // 难度偏好: easy/medium/hard/adaptive
    preferredSports: string[];   // 偏好运动项目
  };
  
  // 能力画像
  abilityProfile: {
    sportsKnowledge: number;     // 体育知识 0-100
    rulesUnderstanding: number;  // 规则理解 0-100
    technicalSkills: number;     // 技术技能 0-100
    historyKnowledge: number;    // 历史知识 0-100
    judgeAbility: number;        // 裁判能力 0-100
    safetyAwareness: number;     // 安全意识 0-100
  };
  
  points: number;                // 积分
  achievements: string[];        // 成就列表
  isActive: boolean;             // 是否激活
  createdAt: Date;
  updatedAt: Date;
}
```

#### 1.2 机构表 (`Institution`)
```typescript
interface IInstitution {
  name: string;                  // 机构名称
  type: string;                  // 机构类型: university/high_school/middle_school/primary_school/training_center
  description?: string;          // 机构描述
  address?: string;              // 地址
  contact: {
    phone?: string;              // 联系电话
    email?: string;              // 联系邮箱
    website?: string;            // 官网
  };
  settings: {
    maxUsers: number;            // 最大用户数
    enabledFeatures: string[];   // 启用功能
    customConfig?: any;          // 自定义配置
  };
  logo?: string;                 // 机构logo
  isActive: boolean;
  createdAt: Date;
  updatedAt: Date;
}
```

### 2. 学习内容相关表

#### 2.1 题目表 (`Question`)
```typescript
interface IQuestion {
  title: string;                 // 题目标题
  content: string;               // 题目内容
  type: string;                  // 题目类型: single_choice/multiple_choice/true_false/fill_blank/case_analysis
  difficulty: string;            // 难度: easy/medium/hard
  category: string;              // 分类: 足球/篮球/田径等
  subCategory?: string;          // 子分类
  options: Array<{
    text: string;                // 选项文本
    isCorrect: boolean;          // 是否正确
    explanation?: string;        // 选项解释
  }>;
  explanation: string;           // 题目解析
  tags: string[];                // 标签
  images?: string[];             // 图片
  videos?: string[];             // 视频
  audio?: string[];              // 音频
  attachments?: string[];        // 附件
  
  // 统计信息
  statistics: {
    totalAttempts: number;       // 总答题次数
    correctAttempts: number;     // 正确次数
    averageTime: number;         // 平均用时
    difficulty: number;          // 实际难度(基于统计)
  };
  
  status: string;                // 状态: draft/published/archived
  author: ObjectId;              // 作者ID
  reviewedBy?: ObjectId;         // 审核人ID
  reviewedAt?: Date;             // 审核时间
  isActive: boolean;
  createdAt: Date;
  updatedAt: Date;
}
```

#### 2.2 考试表 (`Exam`)
```typescript
interface IExam {
  title: string;                 // 考试标题
  description?: string;          // 考试描述
  type: string;                  // 考试类型: practice/formal/competition
  questions: ObjectId[];         // 题目ID列表
  duration: number;              // 考试时长(分钟)
  totalScore: number;            // 总分
  passingScore: number;          // 及格分
  
  // 考试配置
  config: {
    shuffleQuestions: boolean;   // 是否打乱题目顺序
    shuffleOptions: boolean;     // 是否打乱选项顺序
    showScore: boolean;          // 是否显示分数
    showExplanation: boolean;    // 是否显示解析
    allowReview: boolean;        // 是否允许回顾
  };
  
  creator: ObjectId;             // 创建者ID
  
  // 考试答案
  answers: Array<{
    question: ObjectId;          // 题目ID
    selectedOptions: number[];   // 选择的选项索引
    isCorrect: boolean;          // 是否正确
    score: number;               // 得分
    timeSpent: number;           // 用时
    submittedAt: Date;           // 提交时间
  }>;
  
  startTime?: Date;              // 开始时间
  endTime?: Date;                // 结束时间
  submittedAt?: Date;            // 提交时间
  score?: number;                // 总得分
  status: string;                // 状态: not_started/in_progress/completed/expired
  user: ObjectId;                // 考试用户ID
  isActive: boolean;
  createdAt: Date;
  updatedAt: Date;
}
```

#### 2.3 考试发布表 (`ExamPublication`)
```typescript
interface IExamPublication {
  title: string;                 // 考试标题
  description?: string;          // 考试描述
  
  // 考试配置
  examConfig: {
    duration: number;            // 考试时长
    questionCount: number;       // 题目数量
    passingScore: number;        // 及格分
    difficulty: string[];        // 难度范围
    categories: string[];        // 分类范围
    questionTypes: string[];     // 题型范围
  };
  
  // 自动组卷配置
  autoGeneration: {
    strategy: string;            // 组卷策略: balanced/category_balanced/difficulty_focused/weakness_focused/random
    useAI: boolean;              // 是否使用AI推荐
    customWeights?: any;         // 自定义权重
  };
  
  // 目标受众
  targetAudience: {
    type: string;                // 类型: classes/grades/institutions/users
    classes?: ObjectId[];        // 班级列表
    grades?: string[];           // 年级列表
    institutions?: ObjectId[];   // 机构列表
    users?: ObjectId[];          // 指定用户
  };
  
  // 考试安排
  schedule: {
    startTime: Date;             // 开始时间
    endTime?: Date;              // 结束时间(可选)
    timeZone: string;            // 时区
    allowLateSubmission: boolean; // 是否允许迟交
  };
  
  // 统计信息
  statistics: {
    totalTargetUsers: number;    // 目标用户总数
    startedUsers: number;        // 已开始用户数
    completedUsers: number;      // 已完成用户数
    averageScore: number;        // 平均分
    averageTime: number;         // 平均用时
  };
  
  creator: ObjectId;             // 创建者
  status: string;                // 状态: draft/published/active/ended/cancelled
  createdAt: Date;
  updatedAt: Date;
}
```

### 3. 知识库相关表

#### 3.1 知识库表 (`KnowledgeBase`)
```typescript
interface IKnowledgeBase {
  title: string;                 // 知识库标题
  description?: string;          // 描述
  category: string;              // 分类
  difficulty: string;            // 难度级别
  
  // 内容结构
  structure: {
    chapters: Array<{
      id: string;
      title: string;
      description?: string;
      order: number;
      knowledgePoints: string[];  // 知识点ID列表
    }>;
  };
  
  // 统计信息
  stats: {
    totalPoints: number;         // 总知识点数
    completedUsers: number;      // 完成用户数
    averageRating: number;       // 平均评分
    totalViews: number;          // 总浏览量
  };
  
  // 权限设置
  visibility: string;            // 可见性: public/institution/private
  accessLevel: string;           // 访问级别: free/premium/vip
  
  creator: ObjectId;             // 创建者
  institution?: ObjectId;        // 所属机构
  tags: string[];                // 标签
  status: string;                // 状态: draft/published/archived
  createdAt: Date;
  updatedAt: Date;
}
```

#### 3.2 知识点表 (`KnowledgePoint`)
```typescript
interface IKnowledgePoint {
  title: string;                 // 知识点标题
  content: string;               // 内容
  summary?: string;              // 摘要
  difficulty: string;            // 难度
  category: string;              // 分类
  
  // 媒体资源
  media: {
    images?: string[];           // 图片
    videos?: string[];           // 视频
    audio?: string[];            // 音频
    documents?: string[];        // 文档
  };
  
  // 关联关系
  relations: Array<{
    targetPoint: ObjectId;       // 目标知识点
    relationType: string;        // 关系类型: prerequisite/related/follow_up
    strength: number;            // 关系强度 0-1
  }>;
  
  // 学习数据
  learningData: {
    estimatedTime: number;       // 预计学习时间(分钟)
    completionRate: number;      // 完成率
    averageScore: number;        // 平均掌握分数
    totalLearners: number;       // 学习者总数
  };
  
  knowledgeBase: ObjectId;       // 所属知识库
  creator: ObjectId;             // 创建者
  tags: string[];                // 标签
  status: string;                // 状态
  createdAt: Date;
  updatedAt: Date;
}
```

### 4. 班级管理相关表

#### 4.1 班级表 (`Class`)
```typescript
interface IClass {
  name: string;                  // 班级名称
  grade: string;                 // 年级
  description?: string;          // 班级描述
  
  // 班级信息
  classInfo: {
    capacity: number;            // 容量
    currentSize: number;         // 当前人数
    classroom?: string;          // 教室
    schedule?: any;              // 课程表
  };
  
  // 教学配置
  curriculum: {
    subjects: string[];          // 教学科目
    difficulty: string;          // 教学难度
    objectives: string[];        // 教学目标
  };
  
  // 统计信息
  statistics: {
    averageScore: number;        // 平均成绩
    completionRate: number;      // 完成率
    activeStudents: number;      // 活跃学生数
    totalAssignments: number;    // 总作业数
  };
  
  teacher: ObjectId;             // 班主任ID
  teacherName: string;           // 班主任姓名
  institution: ObjectId;         // 所属机构
  students: ObjectId[];          // 学生列表
  
  // 班级设置
  settings: {
    allowSelfEnroll: boolean;    // 允许自主加入
    isPublic: boolean;           // 是否公开
    notificationEnabled: boolean; // 通知开关
  };
  
  isActive: boolean;
  createdAt: Date;
  updatedAt: Date;
}
```

### 5. 学习进度相关表

#### 5.1 学习进度表 (`LearningProgress`)
```typescript
interface ILearningProgress {
  user: ObjectId;                // 用户ID
  knowledgePoint?: ObjectId;     // 知识点ID
  learningPath?: ObjectId;       // 学习路径ID
  
  // 进度信息
  progress: {
    status: string;              // 状态: not_started/in_progress/completed/mastered
    completionRate: number;      // 完成率 0-100
    score: number;               // 掌握分数 0-100
    attempts: number;            // 尝试次数
    timeSpent: number;           // 花费时间(分钟)
  };
  
  // 学习记录
  learningHistory: Array<{
    action: string;              // 行为: start/pause/resume/complete
    timestamp: Date;             // 时间戳
    data?: any;                  // 附加数据
  }>;
  
  // 评估结果
  assessment: {
    preTest?: number;            // 前测分数
    postTest?: number;           // 后测分数
    improvement: number;         // 提升幅度
    weakPoints: string[];        // 薄弱点
    strongPoints: string[];      // 优势点
  };
  
  lastAccessTime: Date;          // 最后访问时间
  completedAt?: Date;            // 完成时间
  createdAt: Date;
  updatedAt: Date;
}
```

### 6. 成就系统相关表

#### 6.1 成就表 (`Achievement`)
```typescript
interface IAchievement {
  name: string;                  // 成就名称
  description: string;           // 成就描述
  category: string;              // 成就分类: learning/accuracy/consistency/exam/time
  icon: string;                  // 图标
  rarity: string;                // 稀有度: common/rare/epic/legendary
  
  // 获得条件
  conditions: {
    type: string;                // 条件类型: count/rate/streak/time
    target: number;              // 目标值
    metric: string;              // 衡量指标
    timeframe?: string;          // 时间范围
  };
  
  // 奖励
  rewards: {
    points: number;              // 积分奖励
    badge?: string;              // 徽章
    title?: string;              // 称号
    privileges?: string[];       // 特权
  };
  
  // 统计信息
  stats: {
    totalEarned: number;         // 总获得次数
    firstEarnedBy?: ObjectId;    // 首次获得者
    firstEarnedAt?: Date;        // 首次获得时间
  };
  
  isActive: boolean;             // 是否激活
  isSystem: boolean;             // 是否系统预设
  createdAt: Date;
  updatedAt: Date;
}
```

#### 6.2 用户成就表 (`UserAchievement`)
```typescript
interface IUserAchievement {
  user: ObjectId;                // 用户ID
  achievement: ObjectId;         // 成就ID
  
  // 进度信息
  progress: number;              // 当前进度
  maxProgress: number;           // 最大进度
  isCompleted: boolean;          // 是否完成
  completedAt?: Date;            // 完成时间
  
  // 通知状态
  isNotified: boolean;           // 是否已通知
  notifiedAt?: Date;             // 通知时间
  
  createdAt: Date;
  updatedAt: Date;
}
```

### 7. 社区系统相关表

#### 7.1 讨论表 (`Discussion`)
```typescript
interface IDiscussion {
  title: string;                 // 讨论标题
  content: string;               // 讨论内容
  type: string;                  // 类型: question/sharing/experience/expert_answer
  category: string;              // 分类
  tags: string[];                // 标签
  
  // 媒体内容
  images?: string[];             // 图片
  attachments?: string[];        // 附件
  
  // 互动统计
  interactions: {
    likes: number;               // 点赞数
    replies: number;             // 回复数
    views: number;               // 浏览数
    shares: number;              // 分享数
  };
  
  // 内容属性
  isSticky: boolean;             // 是否置顶
  isFeatured: boolean;           // 是否精选
  isExpert: boolean;             // 是否专家回答
  
  author: ObjectId;              // 作者ID
  status: string;                // 状态: published/hidden/deleted
  createdAt: Date;
  updatedAt: Date;
}
```

### 8. 资源管理相关表

#### 8.1 学习资源表 (`LearningResource`)
```typescript
interface ILearningResource {
  title: string;                 // 资源标题
  description?: string;          // 资源描述
  type: string;                  // 资源类型: document/video/audio/image/link/course
  category: string;              // 分类
  
  // 文件信息
  fileInfo: {
    filename: string;            // 文件名
    originalName: string;        // 原始文件名
    mimeType: string;            // MIME类型
    size: number;                // 文件大小
    path: string;                // 文件路径
    url?: string;                // 外链URL
  };
  
  // 资源属性
  properties: {
    duration?: number;           // 时长(秒)
    resolution?: string;         // 分辨率
    quality: string;             // 质量: low/medium/high/hd
    language?: string;           // 语言
  };
  
  // 访问控制
  access: {
    level: string;               // 访问级别: public/institution/premium/vip
    permissions: string[];       // 权限列表
    downloadable: boolean;       // 是否可下载
    printable: boolean;          // 是否可打印
  };
  
  // 统计信息
  statistics: {
    views: number;               // 浏览次数
    downloads: number;           // 下载次数
    rating: number;              // 评分
    ratingCount: number;         // 评分人数
  };
  
  creator: ObjectId;             // 创建者
  institution?: ObjectId;        // 所属机构
  tags: string[];                // 标签
  status: string;                // 状态
  createdAt: Date;
  updatedAt: Date;
}
```

### 9. 通知系统相关表

#### 9.1 通知表 (`Notification`)
```typescript
interface INotification {
  title: string;                 // 通知标题
  content: string;               // 通知内容
  type: string;                  // 通知类型: system/exam/achievement/reminder/announcement
  priority: string;              // 优先级: low/normal/high/urgent
  
  // 目标用户
  recipients: {
    type: string;                // 接收者类型: all/roles/users/classes/institutions
    roles?: string[];            // 角色列表
    users?: ObjectId[];          // 用户列表
    classes?: ObjectId[];        // 班级列表
    institutions?: ObjectId[];   // 机构列表
  };
  
  // 发送配置
  delivery: {
    channels: string[];          // 发送渠道: web/email/sms/push
    scheduleTime?: Date;         // 定时发送时间
    expiryTime?: Date;           // 过期时间
    retryCount: number;          // 重试次数
  };
  
  // 互动元素
  actions?: Array<{
    label: string;               // 按钮标签
    type: string;                // 行为类型: link/action/dismiss
    url?: string;                // 链接地址
    action?: string;             // 行为代码
  }>;
  
  // 统计信息
  statistics: {
    totalSent: number;           // 总发送数
    totalRead: number;           // 总阅读数
    totalClicked: number;        // 总点击数
    deliveryRate: number;        // 送达率
    readRate: number;            // 阅读率
  };
  
  sender: ObjectId;              // 发送者
  status: string;                // 状态: draft/scheduled/sending/sent/failed
  createdAt: Date;
  updatedAt: Date;
}
```

### 10. 权限管理相关表

#### 10.1 权限表 (`Permission`)
```typescript
interface IPermission {
  name: string;                  // 权限名称
  code: string;                  // 权限代码
  module: string;                // 所属模块: user_management/question_management/data_analysis等
  description: string;           // 权限描述
  isActive: boolean;             // 是否激活
  createdAt: Date;
  updatedAt: Date;
}
```

#### 10.2 角色表 (`Role`)
```typescript
interface IRole {
  name: string;                  // 角色名称
  code: string;                  // 角色代码
  description: string;           // 角色描述
  permissions: ObjectId[];       // 权限列表
  isSystem: boolean;             // 是否系统预设角色
  institution?: ObjectId;        // 机构自定义角色
  
  // 角色限制
  restrictions: {
    maxUsers?: number;           // 最大用户数
    questionDifficultyLimit?: string[]; // 题目难度限制
    moduleAccess?: string[];     // 模块访问限制
  };
  
  createdBy: ObjectId;           // 创建者
  isActive: boolean;
  createdAt: Date;
  updatedAt: Date;
}
```

### 11. 收藏系统相关表

#### 11.1 收藏表 (`Favorite`)
```typescript
interface IFavorite {
  user: ObjectId;                // 用户ID
  itemType: string;              // 收藏类型: question/resource/discussion/knowledge_point
  itemId: ObjectId;              // 收藏项目ID
  tags?: string[];               // 自定义标签
  notes?: string;                // 备注
  createdAt: Date;
}
```

---

## 📊 系统统计概览

### 功能完成度统计
- **前端页面**: 23个页面，涵盖所有用户角色功能
- **后端接口**: 80+ API接口，支持完整业务流程
- **数据库表**: 15个核心表，支持复杂业务逻辑
- **整体完成度**: 95%

### 角色功能分布
- **学生**: 12个专用页面 + 基础功能
- **教师**: 18个页面(包含学生功能) + 教学管理功能
- **管理员**: 23个页面(全功能) + 系统管理功能
- **超级管理员**: 全部功能 + 权限管理

### 技术架构特点
- **前后端分离**: React + Node.js
- **数据库**: MongoDB(文档型数据库)
- **认证方式**: JWT Token
- **文件存储**: 本地存储 + 云存储支持
- **AI集成**: 千问大模型集成

---

**总结**: 系统功能完整，架构清晰，支持多角色、多场景的体育教育需求。所有功能模块均已实现，可满足完整的在线教育服务需求。